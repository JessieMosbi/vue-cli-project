(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f31a88f2"],{5651:function(e,t,o){"use strict";o.r(t);o("b0c0");var c=o("7a23"),a={class:"table mt-4"},r=Object(c["createVNode"])("thead",null,[Object(c["createVNode"])("tr",null,[Object(c["createVNode"])("th",{width:"120"},"購買時間"),Object(c["createVNode"])("th",{width:"120"},"編號"),Object(c["createVNode"])("th",{width:"120"},"姓名"),Object(c["createVNode"])("th",{width:"120"},"Email"),Object(c["createVNode"])("th",{width:"120"},"應付金額"),Object(c["createVNode"])("th",{width:"100"},"是否付款"),Object(c["createVNode"])("th",{width:"120"},"編輯")])],-1),d={key:0,class:"text-success"},l={key:1},n={class:"btn-group"};function i(e,t,o,i,s,b){var u=Object(c["resolveComponent"])("pagination"),p=Object(c["resolveComponent"])("order-modal"),O=Object(c["resolveComponent"])("delete-order-modal");return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],null,[Object(c["createVNode"])("table",a,[r,Object(c["createVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(s.orders,(function(t){return Object(c["openBlock"])(),Object(c["createBlock"])("tr",{key:t.id},[Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(e.$formatDate(t.create_at,"YYYY/MM/DD")),1),Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(t.id),1),Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(t.user.name),1),Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(t.user.email),1),Object(c["createVNode"])("td",null,"$"+Object(c["toDisplayString"])(e.currency(t.total)),1),Object(c["createVNode"])("td",null,[t.is_paid?(Object(c["openBlock"])(),Object(c["createBlock"])("span",d,"已付款")):(Object(c["openBlock"])(),Object(c["createBlock"])("span",l,"未付款"))]),Object(c["createVNode"])("td",null,[Object(c["createVNode"])("div",n,[Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:function(e){return b.openModal("check",t.id)}}," 查看 ",8,["onClick"]),Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(e){return b.openModal("delete",t.id)}}," 刪除 ",8,["onClick"])])])])})),128))])]),Object(c["createVNode"])(u,{pagination:s.page,onChangePage:b.getData},null,8,["pagination","onChangePage"]),Object(c["createVNode"])(p,{"temp-order":s.tempOrder,onUpdateData:b.getData,"list-page":s.page.current,ref:"orderModal"},null,8,["temp-order","onUpdateData","list-page"]),Object(c["createVNode"])(O,{"temp-order":s.tempOrder,onUpdateData:b.getData,ref:"delOrderModal"},null,8,["temp-order","onUpdateData"])],64)}o("99af"),o("7db0");var s=o("1799"),b=(o("b64b"),{class:"modal fade",id:"orderModal",ref:"orderModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}),u={class:"modal-dialog modal-xl",role:"document"},p={class:"modal-content border-0"},O=Object(c["createVNode"])("div",{class:"modal-header bg-dark text-white"},[Object(c["createVNode"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(c["createVNode"])("span",null,"訂單細節")]),Object(c["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),j={class:"modal-body"},h={class:"row"},m={class:"col-md-4"},N=Object(c["createVNode"])("h3",null,"用戶資料",-1),V={class:"table"},g={key:0},f=Object(c["createVNode"])("th",{style:{width:"100px"}},"姓名",-1),k=Object(c["createVNode"])("th",null,"Email",-1),y=Object(c["createVNode"])("th",null,"電話",-1),v=Object(c["createVNode"])("th",null,"地址",-1),D={class:"col-md-8"},B=Object(c["createVNode"])("h3",null,"訂單細節",-1),x={class:"table"},M=Object(c["createVNode"])("th",{style:{width:"100px"}},"訂單編號",-1),w=Object(c["createVNode"])("th",null,"下單時間",-1),$=Object(c["createVNode"])("th",null,"付款時間",-1),C={key:0},S={key:1},_=Object(c["createVNode"])("th",null,"付款狀態",-1),P={key:0,class:"text-success"},L={key:1,class:"text-muted"},U=Object(c["createVNode"])("th",null,"總金額",-1),F=Object(c["createVNode"])("h3",null,"選購商品",-1),Y={class:"table"},T=Object(c["createVNode"])("thead",null,[Object(c["createVNode"])("tr")],-1),E={key:0},J=Object(c["createVNode"])("tr",null,[Object(c["createVNode"])("th",null,"名稱"),Object(c["createVNode"])("th",null,"數量 / 單位"),Object(c["createVNode"])("th",{class:"text-end"},"金額")],-1),A={class:"text-end"},q={class:"d-flex justify-content-end"},z={class:"form-check"},G={class:"form-check-label",for:"flexCheckDefault"},H={key:0},I={key:1},K={class:"modal-footer"},Q=Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function R(e,t,o,a,r,d){return Object(c["openBlock"])(),Object(c["createBlock"])("div",b,[Object(c["createVNode"])("div",u,[Object(c["createVNode"])("div",p,[O,Object(c["createVNode"])("div",j,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(r.temp.is_paid)+" ",1),Object(c["createVNode"])("div",h,[Object(c["createVNode"])("div",m,[N,Object(c["createVNode"])("table",V,[r.order.user?(Object(c["openBlock"])(),Object(c["createBlock"])("tbody",g,[Object(c["createVNode"])("tr",null,[f,Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(r.order.user.name),1)]),Object(c["createVNode"])("tr",null,[k,Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(r.order.user.email),1)]),Object(c["createVNode"])("tr",null,[y,Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(r.order.user.tel),1)]),Object(c["createVNode"])("tr",null,[v,Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(r.order.user.address),1)])])):Object(c["createCommentVNode"])("",!0)])]),Object(c["createVNode"])("div",D,[B,Object(c["createVNode"])("table",x,[Object(c["createVNode"])("tbody",null,[Object(c["createVNode"])("tr",null,[M,Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(r.order.id),1)]),Object(c["createVNode"])("tr",null,[w,Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(r.order.create_at),1)]),Object(c["createVNode"])("tr",null,[$,Object(c["createVNode"])("td",null,[r.order.is_paid?(Object(c["openBlock"])(),Object(c["createBlock"])("span",C," 時間? ")):(Object(c["openBlock"])(),Object(c["createBlock"])("span",S,"尚未付款"))])]),Object(c["createVNode"])("tr",null,[_,Object(c["createVNode"])("td",null,[r.order.is_paid?(Object(c["openBlock"])(),Object(c["createBlock"])("strong",P,"已付款")):(Object(c["openBlock"])(),Object(c["createBlock"])("span",L,"尚未付款"))])]),Object(c["createVNode"])("tr",null,[U,Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(r.order.total),1)])])]),F,Object(c["createVNode"])("table",Y,[T,r.order.products?(Object(c["openBlock"])(),Object(c["createBlock"])("tbody",E,[J,(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(Object.keys(r.order.products),(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])("tr",{key:e},[Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(r.order.products[e].product.title),1),Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(r.order.products[e].product.num)+" / "+Object(c["toDisplayString"])(r.order.products[e].product.unit),1),Object(c["createVNode"])("td",A,Object(c["toDisplayString"])(r.order.products[e].product.price),1)])})),128))])):Object(c["createCommentVNode"])("",!0)]),Object(c["createVNode"])("div",q,[Object(c["createVNode"])("div",z,[Object(c["withDirectives"])(Object(c["createVNode"])("input",{class:"form-check-input",type:"checkbox",id:"flexCheckDefault",ref:"isPaidCheckbox","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.temp.is_paid=e})},null,512),[[c["vModelCheckbox"],r.temp.is_paid]]),Object(c["createVNode"])("label",G,[r.temp.is_paid?(Object(c["openBlock"])(),Object(c["createBlock"])("span",H,"已付款")):(Object(c["openBlock"])(),Object(c["createBlock"])("span",I,"未付款"))])])])])])]),Object(c["createVNode"])("div",K,[Q,Object(c["createVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=function(){return d.updateOrder&&d.updateOrder.apply(d,arguments)})}," 修改付款狀態 ")])])])],512)}var W=o("7c2b"),X=o.n(W),Z={props:["tempOrder","listPage"],data:function(){return{order:{},modal:null,temp:{is_paid:!1}}},mounted:function(){this.modal=new X.a(this.$refs.orderModal,null)},watch:{tempOrder:function(){this.order=this.tempOrder,console.log("watch"),console.log(this.order),this.temp.is_paid=this.order.is_paid,console.log(this.temp.is_paid)}},methods:{openModal:function(){console.log("openModal"),console.log(this.order),this.modal.show()},updateOrder:function(){var e=this;this.$emitter.emit("loading",!0);var t={data:{is_paid:this.temp.is_paid,total:this.order.total}};this.$http.put("".concat("https://vue3-course-api.hexschool.io","/api/").concat("jessiemosbi","/admin/order/").concat(this.order.id),t).then((function(t){if(console.log(t.data),!t.data.success)return e.$toastMsg("訂單更新失敗！"),void e.$emitter.emit("loading",!1);e.$toastMsg("訂單更新成功！","success"),e.$emitter.emit("loading",!1),e.modal.hide(),e.$emit("updateData",e.listPage)})).catch((function(e){return console.dir(e)}))}}};Z.render=R;var ee=Z,te={class:"modal fade",id:"delOrderModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},oe={class:"modal-dialog",role:"document"},ce={class:"modal-content border-0"},ae=Object(c["createVNode"])("div",{class:"modal-header bg-danger text-white"},[Object(c["createVNode"])("h5",{class:"modal-title"},[Object(c["createVNode"])("span",null,"刪除訂單")]),Object(c["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),re={class:"modal-body"},de=Object(c["createTextVNode"])(" 是否刪除編號 "),le={class:"text-danger"},ne=Object(c["createTextVNode"])(" 的訂單 (刪除後將無法恢復)。 "),ie={class:"modal-footer"},se=Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function be(e,t,o,a,r,d){return Object(c["openBlock"])(),Object(c["createBlock"])("div",te,[Object(c["createVNode"])("div",oe,[Object(c["createVNode"])("div",ce,[ae,Object(c["createVNode"])("div",re,[de,Object(c["createVNode"])("strong",le,Object(c["toDisplayString"])(r.order.id),1),ne]),Object(c["createVNode"])("div",ie,[se,Object(c["createVNode"])("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=function(){return d.deleteOrder&&d.deleteOrder.apply(d,arguments)})}," 確認刪除 ")])])])],512)}var ue=o("5530"),pe={props:["tempOrder"],data:function(){return{modal:null,order:{}}},mounted:function(){this.modal=new X.a(this.$refs.modal,null)},watch:{tempOrder:function(){this.order=Object(ue["a"])({},this.tempOrder)}},methods:{openModal:function(){this.modal.show()},deleteOrder:function(){var e=this;console.log("deleteOrder: ".concat(this.order.id)),this.$emitter.emit("loading",!0),this.$http.delete("".concat("https://vue3-course-api.hexschool.io","/api/").concat("jessiemosbi","/admin/order/").concat(this.order.id)).then((function(t){if(console.log(t.data),!t.data.success)return e.$toastMsg("訂單刪除失敗！"),void e.$emitter.emit("loading",!1);e.$toastMsg("訂單刪除成功！","success"),e.$emitter.emit("loading",!1),e.modal.hide(),e.$emit("updateData")})).catch((function(e){return console.dir(e)}))}}};pe.render=be;var Oe=pe,je={data:function(){return{orders:[],page:{total:0,current:0,hasPre:!1,hasNext:!1},tempOrder:{},nowAction:""}},components:{pagination:s["a"],orderModal:ee,deleteOrderModal:Oe},mounted:function(){this.getData()},methods:{getData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;console.log("page is ".concat(t)),this.$emitter.emit("loading",!0),this.$http.get("".concat("https://vue3-course-api.hexschool.io","/api/").concat("jessiemosbi","/admin/orders?page=").concat(t)).then((function(t){if(console.log(t.data),!t.data.success)return e.$toastMsg("獲取產品列表資料失敗！"),void e.$emitter.emit("loading",!1);e.orders=t.data.orders,e.page.total=t.data.pagination.total_pages,e.page.current=t.data.pagination.current_page,e.page.hasPre=t.data.pagination.has_pre,e.page.hasNext=t.data.pagination.has_next,e.$emitter.emit("loading",!1)})).catch((function(e){return console.dir(e)}))},openModal:function(e,t){console.log(e,t),this.tempOrder=this.orders.find((function(e){return e.id===t})),"check"===e?this.$refs.orderModal.openModal():"delete"===e&&this.$refs.delOrderModal.openModal()}}};je.render=i;t["default"]=je},b0c0:function(e,t,o){var c=o("83ab"),a=o("9bf2").f,r=Function.prototype,d=r.toString,l=/^\s*function ([^ (]*)/,n="name";c&&!(n in r)&&a(r,n,{configurable:!0,get:function(){try{return d.call(this).match(l)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-f31a88f2.1cf4aa53.js.map