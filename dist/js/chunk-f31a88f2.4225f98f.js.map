{"version":3,"sources":["webpack:///./src/views/admin/Orders.vue","webpack:///./src/components/OrderModal.vue","webpack:///./src/components/OrderModal.vue?658e","webpack:///./src/views/admin/Orders.vue?1e9b","webpack:///./node_modules/core-js/modules/es.function.name.js"],"names":["class","width","orders","order","key","id","create_at","user","name","email","total","is_paid","type","openModal","temp-order","tempOrder","ref","tabindex","role","aria-labelledby","aria-hidden","data-bs-dismiss","aria-label","style","tel","address","props","data","modal","mounted","this","$refs","orderModal","watch","console","log","methods","show","render","page","current","hasPre","hasNext","nowAction","isLoading","loader","components","getData","status","$loading","container","hide","$http","get","then","res","success","alert","pagination","total_pages","current_page","has_pre","has_next","catch","err","dir","action","orderId","find","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","call","match","error"],"mappings":"oJACSA,MAAM,c,EACX,yBASQ,cARN,yBAOK,WANH,yBAAyB,MAArBC,MAAM,OAAM,QAChB,yBAAuB,MAAnBA,MAAM,OAAM,MAChB,yBAA0B,MAAtBA,MAAM,OAAM,SAChB,yBAAyB,MAArBA,MAAM,OAAM,QAChB,yBAAyB,MAArBA,MAAM,OAAM,QAChB,yBAAuB,MAAnBA,MAAM,OAAM,U,YAURD,MAAM,gB,aAIPA,MAAM,a,wJAtBnB,yBAyCQ,QAzCR,EAyCQ,CAxCN,EAUA,yBA6BQ,e,2BA5BN,yBA2BK,2CA3Be,EAAAE,QAAM,SAAfC,G,gCAAX,yBA2BK,MA3BwBC,IAAKD,EAAME,I,CACtC,yBAA8B,uCAAvBF,EAAMG,WAAS,GACtB,yBAA8B,uCAAvBH,EAAMI,KAAKC,MAAI,GACtB,yBAA+B,uCAAxBL,EAAMI,KAAKE,OAAK,GACvB,yBAA0B,uCAAnBN,EAAMO,OAAK,GAClB,yBAGK,WAF8BP,EAAMQ,S,yBAAvC,yBAA0D,OAA1D,EAAgD,S,yBAChD,yBAAuB,SAAV,UAEf,yBAiBK,WAhBH,yBAeM,MAfN,EAeM,CAdJ,yBAMS,UALPC,KAAK,SACLZ,MAAM,iCACL,QAAK,mBAAE,EAAAa,UAAS,QAAUV,EAAME,MAClC,OAED,eACA,yBAMS,UALPO,KAAK,SACLZ,MAAM,gCACL,QAAK,mBAAE,EAAAa,UAAS,SAAWV,EAAME,MACnC,OAED,wB,UAOV,yBAAoE,GAAtDS,aAAY,EAAAC,UAAWC,IAAI,c,uDC1CvChB,MAAM,aACNK,GAAG,aACHW,IAAI,aACJC,SAAS,KACTC,KAAK,SACLC,kBAAgB,oBAChBC,cAAY,Q,GAEPpB,MAAM,wBAAwBkB,KAAK,Y,GACjClB,MAAM,0B,EACT,yBAUM,OAVDA,MAAM,mCAAiC,CAC1C,yBAEK,MAFDA,MAAM,cAAcK,GAAG,qB,CACzB,yBAAiB,YAAX,UAER,yBAKU,UAJRO,KAAK,SACLZ,MAAM,YACNqB,kBAAgB,QAChBC,aAAW,Y,MAGVtB,MAAM,c,GACJA,MAAM,O,GACJA,MAAM,Y,EACT,yBAAa,UAAT,QAAI,G,GACDA,MAAM,S,EAGP,yBAAgC,MAA5BuB,MAAA,iBAAqB,MAAE,G,EAI3B,yBAAc,UAAV,SAAK,G,EAIT,yBAAW,UAAP,MAAE,G,EAIN,yBAAW,UAAP,MAAE,G,GAMTvB,MAAM,Y,EACT,yBAAa,UAAT,QAAI,G,GACDA,MAAM,S,EAGP,yBAAkC,MAA9BuB,MAAA,iBAAqB,QAAI,G,EAI7B,yBAAa,UAAT,QAAI,G,EAIR,yBAAa,UAAT,QAAI,G,sBAOR,yBAAa,UAAT,QAAI,G,SAEEvB,MAAM,gB,SAGRA,MAAM,c,EAId,yBAAY,UAAR,OAAG,G,obAmCnB,yBASM,OATDA,MAAM,gBAAc,CACvB,yBAMS,UALPY,KAAK,SACLZ,MAAM,4BACNqB,kBAAgB,SACjB,QAGD,yBAA6D,UAArDT,KAAK,SAASZ,MAAM,mBAAkB,Y,2DAvHtD,yBA2HM,MA3HN,EA2HM,CAlHJ,yBAiHM,MAjHN,EAiHM,CAhHJ,yBA+GM,MA/GN,EA+GM,CA9GJ,EAWA,yBAwFM,MAxFN,EAwFM,CAvFJ,yBAsFM,MAtFN,EAsFM,CArFJ,yBAsBM,MAtBN,EAsBM,CArBJ,EACA,yBAmBQ,QAnBR,EAmBQ,CAlBN,yBAiBQ,cAhBN,yBAGK,WAFH,EACA,yBAA8B,uCAAvB,EAAAG,MAAMI,KAAKC,MAAI,KAExB,yBAGK,WAFH,EACA,yBAA+B,uCAAxB,EAAAL,MAAMI,KAAKE,OAAK,KAEzB,yBAGK,WAFH,EACA,yBAA6B,uCAAtB,EAAAN,MAAMI,KAAKiB,KAAG,KAEvB,yBAGK,WAFH,EACA,yBAAiC,uCAA1B,EAAArB,MAAMI,KAAKkB,SAAO,WAKjC,yBA6DM,MA7DN,EA6DM,CA5DJ,EACA,yBA+BQ,QA/BR,EA+BQ,CA9BN,yBA6BQ,cA5BN,yBAGK,WAFH,EACA,yBAAuB,uCAAhB,EAAAtB,MAAME,IAAE,KAEjB,yBAGK,WAFH,EACA,yBAA8B,uCAAvB,EAAAF,MAAMG,WAAS,KAExB,yBAMK,WALH,EACA,yBAGK,WAFS,EAAAK,S,yBAAZ,yBAAiC,SAAZ,W,yBACrB,yBAAwB,SAAX,aAGjB,yBAQK,WAPH,EACA,yBAKK,WAJgC,EAAAA,S,yBAAnC,yBAEC,SAFD,EACG,S,yBAEH,yBAA2C,OAA3C,EAAgC,aAGpC,yBAGK,WAFH,EACA,yBAA0B,uCAAnB,EAAAR,MAAMO,OAAK,SAIxB,QA8BN,O,8BAmBO,GACbgB,MAAO,CAAC,aACRC,KAFa,WAGX,MAAO,CACLxB,MAAO,GACPyB,MAAO,OAGXC,QARa,WASXC,KAAKF,MAAQ,IAAI,IAAME,KAAKC,MAAMC,WAAY,OAEhDC,MAAO,CACLlB,UADK,WAEHe,KAAK3B,MAAQ2B,KAAKf,UAElBmB,QAAQC,IAAI,SACZD,QAAQC,IAAIL,KAAK3B,SAGrBiC,QAAS,CACPvB,UADO,WAELqB,QAAQC,IAAI,aACZD,QAAQC,IAAIL,KAAK3B,OACjB2B,KAAKF,MAAMS,UCvJjB,EAAOC,OAAS,EAED,QF8CA,GACbX,KADa,WAEX,MAAO,CACLzB,OAAQ,GACRqC,KAAM,CACJ7B,MAAO,EACP8B,QAAS,EACTC,QAAQ,EACRC,SAAS,GAEX3B,UAAW,GACX4B,UAAW,GAEXC,WAAW,EACXC,OAAQ,OAGZC,WAAY,CAEVd,WAAA,GAGFH,QAtBa,WAuBXC,KAAKiB,WAEPd,MAAO,CACLW,UADK,SACMI,GACLA,EACFlB,KAAKe,OAASf,KAAKmB,SAASZ,KAAK,CAC/Ba,UAAW,OAIXpB,KAAKe,QAAQf,KAAKe,OAAOM,SAGjCf,QAAS,CACPW,QADO,WACY,WAAVR,EAAU,uDAAH,EACdT,KAAKc,WAAY,EAEjBd,KAAKsB,MAAMC,IAAX,UAAkB,uCAAlB,gBAAiD,cAAjD,8BAA+Fd,IAC5Fe,MAAK,SAAAC,GAGJ,GAFArB,QAAQC,IAAIoB,EAAI5B,OAEX4B,EAAI5B,KAAK6B,QAGZ,OAFAC,MAAM,oBACN,EAAKb,WAAY,GAInB,EAAK1C,OAASqD,EAAI5B,KAAKzB,OACvB,EAAKqC,KAAK7B,MAAQ6C,EAAI5B,KAAK+B,WAAWC,YACtC,EAAKpB,KAAKC,QAAUe,EAAI5B,KAAK+B,WAAWE,aACxC,EAAKrB,KAAKE,OAASc,EAAI5B,KAAK+B,WAAWG,QACvC,EAAKtB,KAAKG,QAAUa,EAAI5B,KAAK+B,WAAWI,SACxC,EAAKlB,WAAY,KAElBmB,OAAM,SAAAC,GAAE,OAAK9B,QAAQ+B,IAAID,OAG9BnD,UAxBO,SAwBIqD,EAAQC,GACjBjC,QAAQC,IAAI+B,EAAQC,GACpBrC,KAAKf,UAAYe,KAAK5B,OAAOkE,MAAK,SAAAjE,GAAI,OAAKA,EAAME,KAAO8D,KAEzC,UAAXD,GASFpC,KAAKC,MAAMC,WAAWnB,eGzH9B,EAAOyB,OAASA,EAED,gB,qBCLf,IAAI+B,EAAc,EAAQ,QACtBC,EAAiB,EAAQ,QAAuCC,EAEhEC,EAAoBC,SAASC,UAC7BC,EAA4BH,EAAkBI,SAC9CC,EAAS,wBACTC,EAAO,OAIPT,KAAiBS,KAAQN,IAC3BF,EAAeE,EAAmBM,EAAM,CACtCC,cAAc,EACd1B,IAAK,WACH,IACE,OAAOsB,EAA0BK,KAAKlD,MAAMmD,MAAMJ,GAAQ,GAC1D,MAAOK,GACP,MAAO","file":"js/chunk-f31a88f2.4225f98f.js","sourcesContent":["<template>\n  <table class=\"table mt-4\">\n    <thead>\n      <tr>\n        <th width=\"120\">購買時間</th>\n        <th width=\"120\">姓名</th>\n        <th width=\"120\">Email</th>\n        <th width=\"120\">應付金額</th>\n        <th width=\"100\">是否付款</th>\n        <th width=\"120\">編輯</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr v-for=\"order in orders\" :key=\"order.id\">\n        <td>{{ order.create_at }}</td>\n        <td>{{ order.user.name }}</td>\n        <td>{{ order.user.email }}</td>\n        <td>{{ order.total }}</td>\n        <td>\n          <span class=\"text-success\" v-if=\"order.is_paid\">已付款</span>\n          <span v-else>未付款</span>\n        </td>\n        <td>\n          <div class=\"btn-group\">\n            <button\n              type=\"button\"\n              class=\"btn btn-outline-primary btn-sm\"\n              @click=\"openModal('check', order.id)\"\n            >\n              查看\n            </button>\n            <button\n              type=\"button\"\n              class=\"btn btn-outline-danger btn-sm\"\n              @click=\"openModal('delete', order.id)\"\n            >\n              刪除\n            </button>\n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n\n  <order-modal :temp-order=\"tempOrder\" ref=\"orderModal\"></order-modal>\n</template>\n\n<script>\n\nimport orderModal from '@/components/OrderModal.vue'\n\nexport default {\n  data () {\n    return {\n      orders: [],\n      page: {\n        total: 0,\n        current: 0,\n        hasPre: false,\n        hasNext: false\n      },\n      tempOrder: {},\n      nowAction: '',\n      // loading\n      isLoading: false,\n      loader: null\n    }\n  },\n  components: {\n    // pagination,\n    orderModal\n    // deleteProductModal\n  },\n  mounted () {\n    this.getData()\n  },\n  watch: {\n    isLoading (status) {\n      if (status) {\n        this.loader = this.$loading.show({\n          container: null\n        })\n        return\n      }\n      if (this.loader) this.loader.hide()\n    }\n  },\n  methods: {\n    getData (page = 1) {\n      this.isLoading = true\n\n      this.$http.get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/orders?page=${page}`)\n        .then(res => {\n          console.log(res.data)\n\n          if (!res.data.success) {\n            alert('獲取產品列表資料失敗！')\n            this.isLoading = false\n            return\n          }\n\n          this.orders = res.data.orders\n          this.page.total = res.data.pagination.total_pages\n          this.page.current = res.data.pagination.current_page\n          this.page.hasPre = res.data.pagination.has_pre\n          this.page.hasNext = res.data.pagination.has_next\n          this.isLoading = false\n        })\n        .catch(err => console.dir(err))\n    },\n\n    openModal (action, orderId) {\n      console.log(action, orderId)\n      this.tempOrder = this.orders.find(order => order.id === orderId)\n\n      if (action === 'check') {\n        // FIXME:\n        // 如果不加這一行的話，openModal 會比 watch 更早觸發\n        // 看了一下網路上的解釋：應該是 Vue 偵測到值改變後，會重新進行渲染，nextTick 就是等他重新渲染玩一次後所執行的 callback，但還是不是很懂\n        // 不過即使 orderModal.openModal 比 orderModal.tempOrder 更早觸發，也不會影響到 orderModal template 的值，想請問原因？\n\n        // this.$nextTick(() => {\n        //   this.$refs.orderModal.openModal()\n        // })\n        this.$refs.orderModal.openModal()\n      }\n      // else if (action === 'delete') this.$refs.delOrderModal.openModal()\n    }\n  }\n}\n</script>\n","<template>\n  <div\n    class=\"modal fade\"\n    id=\"orderModal\"\n    ref=\"orderModal\"\n    tabindex=\"-1\"\n    role=\"dialog\"\n    aria-labelledby=\"exampleModalLabel\"\n    aria-hidden=\"true\"\n  >\n    <div class=\"modal-dialog modal-xl\" role=\"document\">\n      <div class=\"modal-content border-0\">\n        <div class=\"modal-header bg-dark text-white\">\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">\n            <span>訂單細節</span>\n          </h5>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"row\">\n            <div class=\"col-md-4\">\n              <h3>用戶資料</h3>\n              <table class=\"table\">\n                <tbody>\n                  <tr>\n                    <th style=\"width: 100px\">姓名</th>\n                    <td>{{ order.user.name }}</td>\n                  </tr>\n                  <tr>\n                    <th>Email</th>\n                    <td>{{ order.user.email }}</td>\n                  </tr>\n                  <tr>\n                    <th>電話</th>\n                    <td>{{ order.user.tel }}</td>\n                  </tr>\n                  <tr>\n                    <th>地址</th>\n                    <td>{{ order.user.address }}</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n            <div class=\"col-md-8\">\n              <h3>訂單細節</h3>\n              <table class=\"table\">\n                <tbody>\n                  <tr>\n                    <th style=\"width: 100px\">訂單編號</th>\n                    <td>{{ order.id }}</td>\n                  </tr>\n                  <tr>\n                    <th>下單時間</th>\n                    <td>{{ order.create_at }}</td>\n                  </tr>\n                  <tr>\n                    <th>付款時間</th>\n                    <td>\n                      <span v-if=\"is_paid\"> 時間? </span>\n                      <span v-else>尚未付款</span>\n                    </td>\n                  </tr>\n                  <tr>\n                    <th>付款狀態</th>\n                    <td>\n                      <strong class=\"text-success\" v-if=\"is_paid\"\n                        >已付款</strong\n                      >\n                      <span class=\"text-muted\" v-else>尚未付款</span>\n                    </td>\n                  </tr>\n                  <tr>\n                    <th>總金額</th>\n                    <td>{{ order.total }}</td>\n                  </tr>\n                </tbody>\n              </table>\n              <h3>選購商品</h3>\n              <table class=\"table\">\n                <thead>\n                  <tr></tr>\n                </thead>\n                <tbody>\n                  <tr>\n                    <th>名稱</th>\n                    <td>數量 / 單位</td>\n                    <td class=\"text-end\">金額</td>\n                  </tr>\n                </tbody>\n              </table>\n              <div class=\"d-flex justify-content-end\">\n                <div class=\"form-check\">\n                  <input\n                    class=\"form-check-input\"\n                    type=\"checkbox\"\n                    value=\"\"\n                    id=\"flexCheckDefault\"\n                  />\n                  <label class=\"form-check-label\" for=\"flexCheckDefault\">\n                    <span>已付款</span>\n                    <span>未付款</span>\n                  </label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button\n            type=\"button\"\n            class=\"btn btn-outline-secondary\"\n            data-bs-dismiss=\"modal\"\n          >\n            取消\n          </button>\n          <button type=\"button\" class=\"btn btn-primary\">修改付款狀態</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport Modal from 'bootstrap/js/dist/modal.js'\n\nexport default {\n  props: ['tempOrder'],\n  data () {\n    return {\n      order: {},\n      modal: null\n    }\n  },\n  mounted () {\n    this.modal = new Modal(this.$refs.orderModal, null)\n  },\n  watch: {\n    tempOrder () {\n      this.order = this.tempOrder\n      // openModal 比 watch 更早觸發？\n      console.log('watch')\n      console.log(this.order)\n    }\n  },\n  methods: {\n    openModal () {\n      console.log('openModal')\n      console.log(this.order)\n      this.modal.show()\n    }\n  }\n}\n</script>\n","import { render } from \"./OrderModal.vue?vue&type=template&id=e83c1ce6\"\nimport script from \"./OrderModal.vue?vue&type=script&lang=js\"\nexport * from \"./OrderModal.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Orders.vue?vue&type=template&id=b8017554\"\nimport script from \"./Orders.vue?vue&type=script&lang=js\"\nexport * from \"./Orders.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n"],"sourceRoot":""}