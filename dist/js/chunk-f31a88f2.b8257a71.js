(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f31a88f2"],{5651:function(e,t,o){"use strict";o.r(t);o("b0c0");var a=o("7a23"),c={class:"table mt-4"},r=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",{width:"120"},"購買時間"),Object(a["createVNode"])("th",{width:"120"},"編號"),Object(a["createVNode"])("th",{width:"120"},"姓名"),Object(a["createVNode"])("th",{width:"120"},"Email"),Object(a["createVNode"])("th",{width:"120"},"應付金額"),Object(a["createVNode"])("th",{width:"100"},"是否付款"),Object(a["createVNode"])("th",{width:"120"},"編輯")])],-1),d={key:0,class:"text-success"},l={key:1},n={class:"btn-group"};function i(e,t,o,i,s,b){var u=Object(a["resolveComponent"])("pagination"),p=Object(a["resolveComponent"])("order-modal"),O=Object(a["resolveComponent"])("delete-order-modal");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])("table",c,[r,Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(s.orders,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:t.id},[Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.date(t.create_at)),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(t.id),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(t.user.name),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(t.user.email),1),Object(a["createVNode"])("td",null,"$"+Object(a["toDisplayString"])(e.currency(t.total)),1),Object(a["createVNode"])("td",null,[t.is_paid?(Object(a["openBlock"])(),Object(a["createBlock"])("span",d,"已付款")):(Object(a["openBlock"])(),Object(a["createBlock"])("span",l,"未付款"))]),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",n,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:function(e){return b.openModal("check",t.id)}}," 查看 ",8,["onClick"]),Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(e){return b.openModal("delete",t.id)}}," 刪除 ",8,["onClick"])])])])})),128))])]),Object(a["createVNode"])(u,{"total-pages":s.page.total,"current-page":s.page.current,"has-pre-page":s.page.hasPre,"has-next-page":s.page.hasNext,onChangePage:b.getData},null,8,["total-pages","current-page","has-pre-page","has-next-page","onChangePage"]),Object(a["createVNode"])(p,{"temp-order":s.tempOrder,onUpdateData:b.getData,"list-page":s.page.current,ref:"orderModal"},null,8,["temp-order","onUpdateData","list-page"]),Object(a["createVNode"])(O,{"temp-order":s.tempOrder,onUpdateData:b.getData,ref:"delOrderModal"},null,8,["temp-order","onUpdateData"])],64)}o("99af"),o("7db0");var s=o("1799"),b=(o("b64b"),{class:"modal fade",id:"orderModal",ref:"orderModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}),u={class:"modal-dialog modal-xl",role:"document"},p={class:"modal-content border-0"},O=Object(a["createVNode"])("div",{class:"modal-header bg-dark text-white"},[Object(a["createVNode"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(a["createVNode"])("span",null,"訂單細節")]),Object(a["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),j={class:"modal-body"},h={class:"row"},g={class:"col-md-4"},m=Object(a["createVNode"])("h3",null,"用戶資料",-1),N={class:"table"},V={key:0},f=Object(a["createVNode"])("th",{style:{width:"100px"}},"姓名",-1),k=Object(a["createVNode"])("th",null,"Email",-1),y=Object(a["createVNode"])("th",null,"電話",-1),v=Object(a["createVNode"])("th",null,"地址",-1),x={class:"col-md-8"},B=Object(a["createVNode"])("h3",null,"訂單細節",-1),D={class:"table"},w=Object(a["createVNode"])("th",{style:{width:"100px"}},"訂單編號",-1),M=Object(a["createVNode"])("th",null,"下單時間",-1),L=Object(a["createVNode"])("th",null,"付款時間",-1),C={key:0},S={key:1},_=Object(a["createVNode"])("th",null,"付款狀態",-1),$={key:0,class:"text-success"},P={key:1,class:"text-muted"},U=Object(a["createVNode"])("th",null,"總金額",-1),F=Object(a["createVNode"])("h3",null,"選購商品",-1),T={class:"table"},E=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr")],-1),J={key:0},A=Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",null,"名稱"),Object(a["createVNode"])("th",null,"數量 / 單位"),Object(a["createVNode"])("th",{class:"text-end"},"金額")],-1),q={class:"text-end"},z={class:"d-flex justify-content-end"},G={class:"form-check"},H={class:"form-check-label",for:"flexCheckDefault"},I={key:0},K={key:1},Q={class:"modal-footer"},R=Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function W(e,t,o,c,r,d){return Object(a["openBlock"])(),Object(a["createBlock"])("div",b,[Object(a["createVNode"])("div",u,[Object(a["createVNode"])("div",p,[O,Object(a["createVNode"])("div",j,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(r.temp.is_paid)+" ",1),Object(a["createVNode"])("div",h,[Object(a["createVNode"])("div",g,[m,Object(a["createVNode"])("table",N,[r.order.user?(Object(a["openBlock"])(),Object(a["createBlock"])("tbody",V,[Object(a["createVNode"])("tr",null,[f,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.order.user.name),1)]),Object(a["createVNode"])("tr",null,[k,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.order.user.email),1)]),Object(a["createVNode"])("tr",null,[y,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.order.user.tel),1)]),Object(a["createVNode"])("tr",null,[v,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.order.user.address),1)])])):Object(a["createCommentVNode"])("",!0)])]),Object(a["createVNode"])("div",x,[B,Object(a["createVNode"])("table",D,[Object(a["createVNode"])("tbody",null,[Object(a["createVNode"])("tr",null,[w,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.order.id),1)]),Object(a["createVNode"])("tr",null,[M,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.order.create_at),1)]),Object(a["createVNode"])("tr",null,[L,Object(a["createVNode"])("td",null,[r.order.is_paid?(Object(a["openBlock"])(),Object(a["createBlock"])("span",C," 時間? ")):(Object(a["openBlock"])(),Object(a["createBlock"])("span",S,"尚未付款"))])]),Object(a["createVNode"])("tr",null,[_,Object(a["createVNode"])("td",null,[r.order.is_paid?(Object(a["openBlock"])(),Object(a["createBlock"])("strong",$,"已付款")):(Object(a["openBlock"])(),Object(a["createBlock"])("span",P,"尚未付款"))])]),Object(a["createVNode"])("tr",null,[U,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.order.total),1)])])]),F,Object(a["createVNode"])("table",T,[E,r.order.products?(Object(a["openBlock"])(),Object(a["createBlock"])("tbody",J,[A,(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(Object.keys(r.order.products),(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:e},[Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.order.products[e].product.title),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.order.products[e].product.num)+" / "+Object(a["toDisplayString"])(r.order.products[e].product.unit),1),Object(a["createVNode"])("td",q,Object(a["toDisplayString"])(r.order.products[e].product.price),1)])})),128))])):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("div",z,[Object(a["createVNode"])("div",G,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{class:"form-check-input",type:"checkbox",id:"flexCheckDefault",ref:"isPaidCheckbox","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.temp.is_paid=e})},null,512),[[a["vModelCheckbox"],r.temp.is_paid]]),Object(a["createVNode"])("label",H,[r.temp.is_paid?(Object(a["openBlock"])(),Object(a["createBlock"])("span",I,"已付款")):(Object(a["openBlock"])(),Object(a["createBlock"])("span",K,"未付款"))])])])])])]),Object(a["createVNode"])("div",Q,[R,Object(a["createVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=function(){return d.updateOrder&&d.updateOrder.apply(d,arguments)})}," 修改付款狀態 ")])])])],512)}var X=o("7c2b"),Y=o.n(X),Z={props:["tempOrder","listPage"],data:function(){return{order:{},modal:null,temp:{is_paid:!1},isLoading:!1,loader:null}},mounted:function(){this.modal=new Y.a(this.$refs.orderModal,null)},watch:{isLoading:function(e){e?this.loader=this.$loading.show({container:null}):this.loader&&this.loader.hide()},tempOrder:function(){this.order=this.tempOrder,console.log("watch"),console.log(this.order),this.temp.is_paid=this.order.is_paid,console.log(this.temp.is_paid)}},methods:{openModal:function(){console.log("openModal"),console.log(this.order),this.modal.show()},updateOrder:function(){var e=this;this.isLoading=!0;var t={data:{is_paid:this.temp.is_paid,total:this.order.total}};this.$http.put("".concat("https://vue3-course-api.hexschool.io","/api/").concat("jessiemosbi","/admin/order/").concat(this.order.id),t).then((function(t){if(console.log(t.data),!t.data.success)return alert("訂單更新失敗！"),void(e.isLoading=!1);alert("訂單更新成功！"),e.isLoading=!1,e.modal.hide(),e.$emit("updateData",e.listPage)})).catch((function(e){return console.dir(e)}))}}};Z.render=W;var ee=Z,te={class:"modal fade",id:"delOrderModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},oe={class:"modal-dialog",role:"document"},ae={class:"modal-content border-0"},ce=Object(a["createVNode"])("div",{class:"modal-header bg-danger text-white"},[Object(a["createVNode"])("h5",{class:"modal-title"},[Object(a["createVNode"])("span",null,"刪除訂單")]),Object(a["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),re={class:"modal-body"},de=Object(a["createTextVNode"])(" 是否刪除編號 "),le={class:"text-danger"},ne=Object(a["createTextVNode"])(" 的訂單 (刪除後將無法恢復)。 "),ie={class:"modal-footer"},se=Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function be(e,t,o,c,r,d){return Object(a["openBlock"])(),Object(a["createBlock"])("div",te,[Object(a["createVNode"])("div",oe,[Object(a["createVNode"])("div",ae,[ce,Object(a["createVNode"])("div",re,[de,Object(a["createVNode"])("strong",le,Object(a["toDisplayString"])(r.order.id),1),ne]),Object(a["createVNode"])("div",ie,[se,Object(a["createVNode"])("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=function(){return d.deleteOrder&&d.deleteOrder.apply(d,arguments)})}," 確認刪除 ")])])])],512)}var ue=o("5530"),pe={props:["tempOrder"],data:function(){return{modal:null,order:{},isLoading:!1,loader:null}},mounted:function(){this.modal=new Y.a(this.$refs.modal,null)},watch:{isLoading:function(e){e?this.loader=this.$loading.show({container:null}):this.loader&&this.loader.hide()},tempOrder:function(){this.order=Object(ue["a"])({},this.tempOrder)}},methods:{openModal:function(){this.modal.show()},deleteOrder:function(){var e=this;console.log("deleteOrder: ".concat(this.order.id)),this.isLoading=!0,this.$http.delete("".concat("https://vue3-course-api.hexschool.io","/api/").concat("jessiemosbi","/admin/order/").concat(this.order.id)).then((function(t){if(console.log(t.data),!t.data.success)return alert("訂單刪除失敗！"),void(e.isLoading=!1);alert("訂單刪除成功！"),e.isLoading=!1,e.modal.hide(),e.$emit("updateData")})).catch((function(e){return console.dir(e)}))}}};pe.render=be;var Oe=pe,je={data:function(){return{orders:[],page:{total:0,current:0,hasPre:!1,hasNext:!1},tempOrder:{},nowAction:"",isLoading:!1,loader:null}},components:{pagination:s["a"],orderModal:ee,deleteOrderModal:Oe},mounted:function(){this.getData()},watch:{isLoading:function(e){e?this.loader=this.$loading.show({container:null}):this.loader&&this.loader.hide()}},methods:{getData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;console.log("page is ".concat(t)),this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io","/api/").concat("jessiemosbi","/admin/orders?page=").concat(t)).then((function(t){if(console.log(t.data),!t.data.success)return alert("獲取產品列表資料失敗！"),void(e.isLoading=!1);e.orders=t.data.orders,e.page.total=t.data.pagination.total_pages,e.page.current=t.data.pagination.current_page,e.page.hasPre=t.data.pagination.has_pre,e.page.hasNext=t.data.pagination.has_next,e.isLoading=!1})).catch((function(e){return console.dir(e)}))},openModal:function(e,t){console.log(e,t),this.tempOrder=this.orders.find((function(e){return e.id===t})),"check"===e?this.$refs.orderModal.openModal():"delete"===e&&this.$refs.delOrderModal.openModal()}}};je.render=i;t["default"]=je},b0c0:function(e,t,o){var a=o("83ab"),c=o("9bf2").f,r=Function.prototype,d=r.toString,l=/^\s*function ([^ (]*)/,n="name";a&&!(n in r)&&c(r,n,{configurable:!0,get:function(){try{return d.call(this).match(l)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-f31a88f2.b8257a71.js.map