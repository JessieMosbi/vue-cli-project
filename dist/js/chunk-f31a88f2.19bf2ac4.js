(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f31a88f2"],{5651:function(e,t,c){"use strict";c.r(t);c("b0c0");var a=c("7a23"),o={class:"table mt-4"},r=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",{width:"120"},"購買時間"),Object(a["createVNode"])("th",{width:"120"},"編號"),Object(a["createVNode"])("th",{width:"120"},"姓名"),Object(a["createVNode"])("th",{width:"120"},"Email"),Object(a["createVNode"])("th",{width:"120"},"應付金額"),Object(a["createVNode"])("th",{width:"100"},"是否付款"),Object(a["createVNode"])("th",{width:"120"},"編輯")])],-1),d={key:0,class:"text-success"},l={key:1},n={class:"btn-group"};function i(e,t,c,i,s,b){var u=Object(a["resolveComponent"])("pagination"),O=Object(a["resolveComponent"])("order-modal"),p=Object(a["resolveComponent"])("delete-order-modal");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])("table",o,[r,Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(s.orders,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:t.id},[Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.$formatDate(t.create_at,"YYYY/MM/DD")),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(t.id),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(t.user.name),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(t.user.email),1),Object(a["createVNode"])("td",null,"$"+Object(a["toDisplayString"])(e.currency(t.total)),1),Object(a["createVNode"])("td",null,[t.is_paid?(Object(a["openBlock"])(),Object(a["createBlock"])("span",d,"已付款")):(Object(a["openBlock"])(),Object(a["createBlock"])("span",l,"未付款"))]),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",n,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:function(e){return b.openModal("check",t.id)}}," 查看 ",8,["onClick"]),Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(e){return b.openModal("delete",t.id)}}," 刪除 ",8,["onClick"])])])])})),128))])]),Object(a["createVNode"])(u,{pagination:s.page,onChangePage:b.getData},null,8,["pagination","onChangePage"]),Object(a["createVNode"])(O,{"temp-order":s.tempOrder,onUpdateData:b.getData,"list-page":s.page.current,ref:"orderModal"},null,8,["temp-order","onUpdateData","list-page"]),Object(a["createVNode"])(p,{"temp-order":s.tempOrder,onUpdateData:b.getData,ref:"delOrderModal"},null,8,["temp-order","onUpdateData"])],64)}c("99af"),c("7db0");var s=c("1799"),b=(c("b64b"),{class:"modal fade",id:"orderModal",ref:"orderModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}),u={class:"modal-dialog modal-xl",role:"document"},O={class:"modal-content border-0"},p=Object(a["createVNode"])("div",{class:"modal-header bg-dark text-white"},[Object(a["createVNode"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(a["createVNode"])("span",null,"訂單細節")]),Object(a["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),j={class:"modal-body"},m={class:"row"},h={class:"col-md-4"},N=Object(a["createVNode"])("h3",null,"用戶資料",-1),V={class:"table"},g={key:0},f=Object(a["createVNode"])("th",{style:{width:"100px"}},"姓名",-1),k=Object(a["createVNode"])("th",null,"Email",-1),y=Object(a["createVNode"])("th",null,"電話",-1),v=Object(a["createVNode"])("th",null,"地址",-1),B={class:"col-md-8"},D=Object(a["createVNode"])("h3",null,"訂單細節",-1),x={class:"table"},M=Object(a["createVNode"])("th",{style:{width:"100px"}},"訂單編號",-1),w=Object(a["createVNode"])("th",null,"下單時間",-1),$=Object(a["createVNode"])("th",null,"付款時間",-1),C={key:0},S={key:1},_=Object(a["createVNode"])("th",null,"付款狀態",-1),P={key:0,class:"text-success"},L={key:1,class:"text-muted"},U=Object(a["createVNode"])("th",null,"總金額",-1),F=Object(a["createVNode"])("h3",null,"選購商品",-1),Y={class:"table"},E=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr")],-1),J={key:0},T=Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",null,"名稱"),Object(a["createVNode"])("th",null,"數量 / 單位"),Object(a["createVNode"])("th",{class:"text-end"},"金額")],-1),A={class:"text-end"},q={class:"d-flex justify-content-end"},z={class:"form-check"},G={class:"form-check-label",for:"flexCheckDefault"},H={key:0},I={key:1},K={class:"modal-footer"},Q=Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function R(e,t,c,o,r,d){return Object(a["openBlock"])(),Object(a["createBlock"])("div",b,[Object(a["createVNode"])("div",u,[Object(a["createVNode"])("div",O,[p,Object(a["createVNode"])("div",j,[Object(a["createVNode"])("div",m,[Object(a["createVNode"])("div",h,[N,Object(a["createVNode"])("table",V,[r.order.user?(Object(a["openBlock"])(),Object(a["createBlock"])("tbody",g,[Object(a["createVNode"])("tr",null,[f,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.order.user.name),1)]),Object(a["createVNode"])("tr",null,[k,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.order.user.email),1)]),Object(a["createVNode"])("tr",null,[y,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.order.user.tel),1)]),Object(a["createVNode"])("tr",null,[v,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.order.user.address),1)])])):Object(a["createCommentVNode"])("",!0)])]),Object(a["createVNode"])("div",B,[D,Object(a["createVNode"])("table",x,[Object(a["createVNode"])("tbody",null,[Object(a["createVNode"])("tr",null,[M,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.order.id),1)]),Object(a["createVNode"])("tr",null,[w,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.order.create_at),1)]),Object(a["createVNode"])("tr",null,[$,Object(a["createVNode"])("td",null,[r.order.is_paid?(Object(a["openBlock"])(),Object(a["createBlock"])("span",C," 時間? ")):(Object(a["openBlock"])(),Object(a["createBlock"])("span",S,"尚未付款"))])]),Object(a["createVNode"])("tr",null,[_,Object(a["createVNode"])("td",null,[r.order.is_paid?(Object(a["openBlock"])(),Object(a["createBlock"])("strong",P,"已付款")):(Object(a["openBlock"])(),Object(a["createBlock"])("span",L,"尚未付款"))])]),Object(a["createVNode"])("tr",null,[U,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.order.total),1)])])]),F,Object(a["createVNode"])("table",Y,[E,r.order.products?(Object(a["openBlock"])(),Object(a["createBlock"])("tbody",J,[T,(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(Object.keys(r.order.products),(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:e},[Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.order.products[e].product.title),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.order.products[e].product.num)+" / "+Object(a["toDisplayString"])(r.order.products[e].product.unit),1),Object(a["createVNode"])("td",A,Object(a["toDisplayString"])(r.order.products[e].product.price),1)])})),128))])):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("div",q,[Object(a["createVNode"])("div",z,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{class:"form-check-input",type:"checkbox",id:"flexCheckDefault",ref:"isPaidCheckbox","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.temp.is_paid=e})},null,512),[[a["vModelCheckbox"],r.temp.is_paid]]),Object(a["createVNode"])("label",G,[r.temp.is_paid?(Object(a["openBlock"])(),Object(a["createBlock"])("span",H,"已付款")):(Object(a["openBlock"])(),Object(a["createBlock"])("span",I,"未付款"))])])])])])]),Object(a["createVNode"])("div",K,[Q,Object(a["createVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=function(){return d.updateOrder&&d.updateOrder.apply(d,arguments)})}," 修改付款狀態 ")])])])],512)}var W=c("7c2b"),X=c.n(W),Z={props:["tempOrder","listPage"],data:function(){return{order:{},modal:null,temp:{is_paid:!1}}},mounted:function(){this.modal=new X.a(this.$refs.orderModal,null)},watch:{tempOrder:function(){this.order=this.tempOrder,this.temp.is_paid=this.order.is_paid}},methods:{openModal:function(){this.modal.show()},updateOrder:function(){var e=this;this.$emitter.emit("loading",!0);var t={data:{is_paid:this.temp.is_paid,total:this.order.total}};this.$http.put("".concat("https://vue3-course-api.hexschool.io","/api/").concat("jessiemosbi","/admin/order/").concat(this.order.id),t).then((function(t){if(!t.data.success)return e.$toastMsg("訂單更新失敗！"),void e.$emitter.emit("loading",!1);e.$toastMsg("訂單更新成功！","success"),e.$emitter.emit("loading",!1),e.modal.hide(),e.$emit("updateData",e.listPage)})).catch((function(e){return console.dir(e)}))}}};Z.render=R;var ee=Z,te={class:"modal fade",id:"delOrderModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},ce={class:"modal-dialog",role:"document"},ae={class:"modal-content border-0"},oe=Object(a["createVNode"])("div",{class:"modal-header bg-danger text-white"},[Object(a["createVNode"])("h5",{class:"modal-title"},[Object(a["createVNode"])("span",null,"刪除訂單")]),Object(a["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),re={class:"modal-body"},de=Object(a["createTextVNode"])(" 是否刪除編號 "),le={class:"text-danger"},ne=Object(a["createTextVNode"])(" 的訂單 (刪除後將無法恢復)。 "),ie={class:"modal-footer"},se=Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function be(e,t,c,o,r,d){return Object(a["openBlock"])(),Object(a["createBlock"])("div",te,[Object(a["createVNode"])("div",ce,[Object(a["createVNode"])("div",ae,[oe,Object(a["createVNode"])("div",re,[de,Object(a["createVNode"])("strong",le,Object(a["toDisplayString"])(r.order.id),1),ne]),Object(a["createVNode"])("div",ie,[se,Object(a["createVNode"])("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=function(){return d.deleteOrder&&d.deleteOrder.apply(d,arguments)})}," 確認刪除 ")])])])],512)}var ue=c("5530"),Oe={props:["tempOrder"],data:function(){return{modal:null,order:{}}},mounted:function(){this.modal=new X.a(this.$refs.modal,null)},watch:{tempOrder:function(){this.order=Object(ue["a"])({},this.tempOrder)}},methods:{openModal:function(){this.modal.show()},deleteOrder:function(){var e=this;this.$emitter.emit("loading",!0),this.$http.delete("".concat("https://vue3-course-api.hexschool.io","/api/").concat("jessiemosbi","/admin/order/").concat(this.order.id)).then((function(t){if(!t.data.success)return e.$toastMsg("訂單刪除失敗！"),void e.$emitter.emit("loading",!1);e.$toastMsg("訂單刪除成功！","success"),e.$emitter.emit("loading",!1),e.modal.hide(),e.$emit("updateData")})).catch((function(e){return console.dir(e)}))}}};Oe.render=be;var pe=Oe,je={data:function(){return{orders:[],page:{total:0,current:0,hasPre:!1,hasNext:!1},tempOrder:{},nowAction:""}},components:{pagination:s["a"],orderModal:ee,deleteOrderModal:pe},mounted:function(){this.getData()},methods:{getData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$emitter.emit("loading",!0),this.$http.get("".concat("https://vue3-course-api.hexschool.io","/api/").concat("jessiemosbi","/admin/orders?page=").concat(t)).then((function(t){if(!t.data.success)return e.$toastMsg("獲取產品列表資料失敗！"),void e.$emitter.emit("loading",!1);e.orders=t.data.orders,e.page.total=t.data.pagination.total_pages,e.page.current=t.data.pagination.current_page,e.page.hasPre=t.data.pagination.has_pre,e.page.hasNext=t.data.pagination.has_next,e.$emitter.emit("loading",!1)})).catch((function(e){return console.dir(e)}))},openModal:function(e,t){this.tempOrder=this.orders.find((function(e){return e.id===t})),"check"===e?this.$refs.orderModal.openModal():"delete"===e&&this.$refs.delOrderModal.openModal()}}};je.render=i;t["default"]=je},b0c0:function(e,t,c){var a=c("83ab"),o=c("9bf2").f,r=Function.prototype,d=r.toString,l=/^\s*function ([^ (]*)/,n="name";a&&!(n in r)&&o(r,n,{configurable:!0,get:function(){try{return d.call(this).match(l)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-f31a88f2.19bf2ac4.js.map