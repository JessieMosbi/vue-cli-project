{"version":3,"sources":["webpack:///./src/views/admin/Orders.vue","webpack:///./src/components/OrderModal.vue","webpack:///./src/components/OrderModal.vue?658e","webpack:///./src/components/DeleteOrderModal.vue","webpack:///./src/components/DeleteOrderModal.vue?135e","webpack:///./src/views/admin/Orders.vue?1e9b","webpack:///./node_modules/core-js/modules/es.function.name.js"],"names":["class","width","orders","order","key","id","$formatDate","create_at","user","name","email","currency","total","is_paid","type","openModal","pagination","page","getData","temp-order","tempOrder","list-page","current","ref","tabindex","role","aria-labelledby","aria-hidden","data-bs-dismiss","aria-label","style","for","temp","tel","address","products","Object","keys","productId","product","title","num","unit","price","updateOrder","props","data","modal","mounted","this","$refs","orderModal","watch","console","log","methods","show","$emitter","emit","$http","put","then","res","success","$toastMsg","hide","$emit","listPage","catch","err","dir","render","deleteOrder","delete","hasPre","hasNext","nowAction","components","deleteOrderModal","get","total_pages","current_page","has_pre","has_next","action","orderId","find","delOrderModal","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","call","match","error"],"mappings":"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","file":"js/chunk-f31a88f2.1cf4aa53.js","sourcesContent":["<template>\n  <table class=\"table mt-4\">\n    <thead>\n      <tr>\n        <th width=\"120\">購買時間</th>\n        <th width=\"120\">編號</th>\n        <th width=\"120\">姓名</th>\n        <th width=\"120\">Email</th>\n        <th width=\"120\">應付金額</th>\n        <th width=\"100\">是否付款</th>\n        <th width=\"120\">編輯</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr v-for=\"order in orders\" :key=\"order.id\">\n        <td>\n          {{ $formatDate(order.create_at, \"YYYY/MM/DD\") }}\n        </td>\n        <td>{{ order.id }}</td>\n        <td>{{ order.user.name }}</td>\n        <td>{{ order.user.email }}</td>\n        <td>${{ currency(order.total) }}</td>\n        <td>\n          <span class=\"text-success\" v-if=\"order.is_paid\">已付款</span>\n          <span v-else>未付款</span>\n        </td>\n        <td>\n          <div class=\"btn-group\">\n            <button\n              type=\"button\"\n              class=\"btn btn-outline-primary btn-sm\"\n              @click=\"openModal('check', order.id)\"\n            >\n              查看\n            </button>\n            <button\n              type=\"button\"\n              class=\"btn btn-outline-danger btn-sm\"\n              @click=\"openModal('delete', order.id)\"\n            >\n              刪除\n            </button>\n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  <pagination :pagination=\"page\" @change-page=\"getData\"></pagination>\n\n  <order-modal\n    :temp-order=\"tempOrder\"\n    @update-data=\"getData\"\n    :list-page=\"page.current\"\n    ref=\"orderModal\"\n  ></order-modal>\n\n  <delete-order-modal\n    :temp-order=\"tempOrder\"\n    @update-data=\"getData\"\n    ref=\"delOrderModal\"\n  ></delete-order-modal>\n</template>\n\n<script>\n\nimport pagination from '@/components/Pagination.vue'\nimport orderModal from '@/components/OrderModal.vue'\nimport deleteOrderModal from '@/components/DeleteOrderModal.vue'\n\nexport default {\n  data () {\n    return {\n      orders: [],\n      page: {\n        total: 0,\n        current: 0,\n        hasPre: false,\n        hasNext: false\n      },\n      tempOrder: {},\n      nowAction: ''\n      // loading\n      // isLoading: false,\n      // loader: null\n    }\n  },\n  components: {\n    pagination,\n    orderModal,\n    deleteOrderModal\n  },\n  mounted () {\n    this.getData()\n  },\n  // watch: {\n  //   isLoading (status) {\n  //     if (status) {\n  //       this.loader = this.$loading.show({\n  //         container: null\n  //       })\n  //       return\n  //     }\n  //     if (this.loader) this.loader.hide()\n  //   }\n  // },\n  methods: {\n    getData (page = 1) {\n      console.log(`page is ${page}`)\n      this.$emitter.emit('loading', true)\n\n      this.$http.get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/orders?page=${page}`)\n        .then(res => {\n          console.log(res.data)\n\n          if (!res.data.success) {\n            this.$toastMsg('獲取產品列表資料失敗！')\n            this.$emitter.emit('loading', false)\n            return\n          }\n\n          this.orders = res.data.orders\n          this.page.total = res.data.pagination.total_pages\n          this.page.current = res.data.pagination.current_page\n          this.page.hasPre = res.data.pagination.has_pre\n          this.page.hasNext = res.data.pagination.has_next\n          this.$emitter.emit('loading', false)\n        })\n        .catch(err => console.dir(err))\n    },\n\n    openModal (action, orderId) {\n      console.log(action, orderId)\n      this.tempOrder = this.orders.find(order => order.id === orderId)\n\n      if (action === 'check') {\n        // FIXME:\n        // 如果不加這一行的話，openModal 會比 watch 更早觸發\n        // 看了一下網路上的解釋：應該是 Vue 偵測到值改變後，會重新進行渲染，nextTick 就是等他重新渲染玩一次後所執行的 callback，但還是不是很懂\n        // 不過即使 orderModal.openModal 比 orderModal.tempOrder 更早觸發，也不會影響到 orderModal template 的值，想請問原因？\n\n        // this.$nextTick(() => {\n        //   this.$refs.orderModal.openModal()\n        // })\n        this.$refs.orderModal.openModal()\n      } else if (action === 'delete') {\n        this.$refs.delOrderModal.openModal()\n      }\n    }\n  }\n}\n</script>\n","<template>\n  <div\n    class=\"modal fade\"\n    id=\"orderModal\"\n    ref=\"orderModal\"\n    tabindex=\"-1\"\n    role=\"dialog\"\n    aria-labelledby=\"exampleModalLabel\"\n    aria-hidden=\"true\"\n  >\n    <div class=\"modal-dialog modal-xl\" role=\"document\">\n      <div class=\"modal-content border-0\">\n        <div class=\"modal-header bg-dark text-white\">\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">\n            <span>訂單細節</span>\n          </h5>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          {{ temp.is_paid }}\n          <div class=\"row\">\n            <div class=\"col-md-4\">\n              <h3>用戶資料</h3>\n              <table class=\"table\">\n                <tbody v-if=\"order.user\">\n                  <tr>\n                    <th style=\"width: 100px\">姓名</th>\n                    <td>{{ order.user.name }}</td>\n                  </tr>\n                  <tr>\n                    <th>Email</th>\n                    <td>{{ order.user.email }}</td>\n                  </tr>\n                  <tr>\n                    <th>電話</th>\n                    <td>{{ order.user.tel }}</td>\n                  </tr>\n                  <tr>\n                    <th>地址</th>\n                    <td>{{ order.user.address }}</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n            <div class=\"col-md-8\">\n              <h3>訂單細節</h3>\n              <table class=\"table\">\n                <tbody>\n                  <tr>\n                    <th style=\"width: 100px\">訂單編號</th>\n                    <td>{{ order.id }}</td>\n                  </tr>\n                  <tr>\n                    <th>下單時間</th>\n                    <td>{{ order.create_at }}</td>\n                  </tr>\n                  <tr>\n                    <th>付款時間</th>\n                    <td>\n                      <span v-if=\"order.is_paid\"> 時間? </span>\n                      <span v-else>尚未付款</span>\n                    </td>\n                  </tr>\n                  <tr>\n                    <th>付款狀態</th>\n                    <td>\n                      <strong class=\"text-success\" v-if=\"order.is_paid\"\n                        >已付款</strong\n                      >\n                      <span class=\"text-muted\" v-else>尚未付款</span>\n                    </td>\n                  </tr>\n                  <tr>\n                    <th>總金額</th>\n                    <td>{{ order.total }}</td>\n                  </tr>\n                </tbody>\n              </table>\n              <h3>選購商品</h3>\n              <table class=\"table\">\n                <thead>\n                  <tr></tr>\n                </thead>\n                <tbody v-if=\"order.products\">\n                  <tr>\n                    <th>名稱</th>\n                    <th>數量 / 單位</th>\n                    <th class=\"text-end\">金額</th>\n                  </tr>\n                  <tr\n                    v-for=\"productId in Object.keys(order.products)\"\n                    :key=\"productId\"\n                  >\n                    <td>{{ order.products[productId].product.title }}</td>\n                    <td>\n                      {{ order.products[productId].product.num }} /\n                      {{ order.products[productId].product.unit }}\n                    </td>\n                    <td class=\"text-end\">\n                      {{ order.products[productId].product.price }}\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n              <div class=\"d-flex justify-content-end\">\n                <div class=\"form-check\">\n                  <input\n                    class=\"form-check-input\"\n                    type=\"checkbox\"\n                    id=\"flexCheckDefault\"\n                    ref=\"isPaidCheckbox\"\n                    v-model=\"temp.is_paid\"\n                  />\n                  <label class=\"form-check-label\" for=\"flexCheckDefault\">\n                    <span v-if=\"temp.is_paid\">已付款</span>\n                    <span v-else>未付款</span>\n                  </label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button\n            type=\"button\"\n            class=\"btn btn-outline-secondary\"\n            data-bs-dismiss=\"modal\"\n          >\n            取消\n          </button>\n          <button type=\"button\" class=\"btn btn-primary\" @click=\"updateOrder\">\n            修改付款狀態\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport Modal from 'bootstrap/js/dist/modal.js'\n\nexport default {\n  props: ['tempOrder', 'listPage'],\n  data () {\n    return {\n      order: {},\n      modal: null,\n      temp: {\n        is_paid: false\n      }\n      // loading\n      // isLoading: false,\n      // loader: null\n    }\n  },\n  mounted () {\n    this.modal = new Modal(this.$refs.orderModal, null)\n  },\n  watch: {\n    // isLoading (status) {\n    //   if (status) {\n    //     this.loader = this.$loading.show({\n    //       container: null\n    //     })\n    //     return\n    //   }\n    //   if (this.loader) this.loader.hide()\n    // },\n    tempOrder () {\n      this.order = this.tempOrder\n      // openModal 比 watch 更早觸發？\n      console.log('watch')\n      console.log(this.order)\n      // console.log(Object.keys(this.order.products))\n      // Object.keys(this.order.products).forEach(productId => {\n      //   console.log(this.order.products[productId].product.title)\n      //   // console.log(this.order.products[productId].title)\n      // })\n      this.temp.is_paid = this.order.is_paid\n      console.log(this.temp.is_paid)\n    }\n  },\n  methods: {\n    openModal () {\n      console.log('openModal')\n      console.log(this.order)\n      this.modal.show()\n    },\n\n    updateOrder () {\n      this.$emitter.emit('loading', true)\n\n      const data = {\n        data: {\n          is_paid: this.temp.is_paid,\n          total: this.order.total\n        }\n      }\n\n      this.$http.put(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/order/${this.order.id}`, data)\n        .then(res => {\n          console.log(res.data)\n          if (!res.data.success) {\n            this.$toastMsg('訂單更新失敗！')\n            this.$emitter.emit('loading', false)\n            return\n          }\n          this.$toastMsg('訂單更新成功！', 'success')\n          this.$emitter.emit('loading', false)\n\n          this.modal.hide()\n          this.$emit('updateData', this.listPage) // 讓 list 停留在同一頁\n        })\n        .catch(err => console.dir(err))\n    }\n  }\n}\n</script>\n","import { render } from \"./OrderModal.vue?vue&type=template&id=eb46d60e\"\nimport script from \"./OrderModal.vue?vue&type=script&lang=js\"\nexport * from \"./OrderModal.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <div\n    class=\"modal fade\"\n    id=\"delOrderModal\"\n    tabindex=\"-1\"\n    role=\"dialog\"\n    aria-labelledby=\"exampleModalLabel\"\n    aria-hidden=\"true\"\n    ref=\"modal\"\n  >\n    <div class=\"modal-dialog\" role=\"document\">\n      <div class=\"modal-content border-0\">\n        <div class=\"modal-header bg-danger text-white\">\n          <h5 class=\"modal-title\">\n            <span>刪除訂單</span>\n          </h5>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          是否刪除編號\n          <strong class=\"text-danger\">{{ order.id }}</strong> 的訂單\n          (刪除後將無法恢復)。\n        </div>\n        <div class=\"modal-footer\">\n          <button\n            type=\"button\"\n            class=\"btn btn-outline-secondary\"\n            data-bs-dismiss=\"modal\"\n          >\n            取消\n          </button>\n          <button type=\"button\" class=\"btn btn-danger\" @click=\"deleteOrder\">\n            確認刪除\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport Modal from 'bootstrap/js/dist/modal.js'\n\nexport default {\n  props: ['tempOrder'],\n  data () {\n    return {\n      modal: null,\n      order: {}\n      // loading\n      // isLoading: false,\n      // loader: null\n    }\n  },\n  mounted () {\n    this.modal = new Modal(this.$refs.modal, null)\n  },\n  watch: {\n    // isLoading (status) {\n    //   if (status) {\n    //     this.loader = this.$loading.show({\n    //       container: null\n    //     })\n    //     return\n    //   }\n    //   if (this.loader) this.loader.hide()\n    // },\n    tempOrder () {\n      this.order = { ...this.tempOrder }\n    }\n  },\n  methods: {\n    openModal () {\n      this.modal.show()\n    },\n\n    deleteOrder () {\n      console.log(`deleteOrder: ${this.order.id}`)\n\n      this.$emitter.emit('loading', true)\n\n      this.$http.delete(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/order/${this.order.id}`)\n        .then(res => {\n          console.log(res.data)\n          if (!res.data.success) {\n            this.$toastMsg('訂單刪除失敗！')\n            this.$emitter.emit('loading', false)\n            return\n          }\n          this.$toastMsg('訂單刪除成功！', 'success')\n          this.$emitter.emit('loading', false)\n\n          this.modal.hide()\n          this.$emit('updateData')\n        })\n        .catch(err => console.dir(err))\n    }\n  }\n}\n</script>\n","import { render } from \"./DeleteOrderModal.vue?vue&type=template&id=4fe03068\"\nimport script from \"./DeleteOrderModal.vue?vue&type=script&lang=js\"\nexport * from \"./DeleteOrderModal.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Orders.vue?vue&type=template&id=3cba956c\"\nimport script from \"./Orders.vue?vue&type=script&lang=js\"\nexport * from \"./Orders.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n"],"sourceRoot":""}